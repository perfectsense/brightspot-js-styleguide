<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="/styleguide/_/normalize.css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/styleguide/_/font-awesome/css/font-awesome.min.css"></script>
    <link rel="stylesheet/less" type="text/css" href="/styleguide.less">
    <script type="text/javascript" src="/styleguide/_/less/dist/less.min.js"></script>
    <script type="text/javascript" src="/styleguide/_/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="/styleguide/_/sticky-kit/jquery.sticky-kit.min.js"></script>
    <script type="text/javascript">
      (function () {
        function resizeIframes() {
          $('.sg-file-body > iframe').each(function () {
            $(this).height($(this.contentDocument.body).outerHeight(true));
          });
        }

        resizeIframes();
        setInterval(resizeIframes, 500);

        $(document).ready(function () {
          $('.sg-menu').stick_in_parent();

          $('.sg-file-body').each(function () {
            var $body = $(this);
            var $devices = $body.find('> .sg-device');
            
            if ($devices.length > 0) {
              var width = 50;
              
              $devices.each(function () {
                width += $(this).outerWidth(true);
              });

              $body.outerWidth(width);
            }
          });
        });
      })();
    </script>
  </head>
  <body>
    <div class="sg-title">
      Styleguide{{#each names}}: {{this}}{{/each}}

      <a href="{{seedUrl}}">#{{seed}}</a>

      {{#with randomizeUrl}}
        - <a href="{{this}}"><i class="fa fa-refresh"></i> Randomize</a>
      {{/with}}
    </div>

    {{#with availableDevices}}
      <div class="sg-available-device-list">
        <a href="{{../resetDisplayDevicesUrl}}"><i class="fa fa-ban"></i></a>

        {{#each this}}
          <a{{#if selected}} class="sg-available-device-selected"{{/if}} href="{{url}}"><i class="{{device.icon}}"></i></a>
        {{/each}}
      </div>
    {{/with}}

    <div class="sg-menu">
      <ul class="sg-group-list">
        {{#each groups}}
          <li class="sg-group">
            <span class="sg-group-name">{{name}}</span>
            <ul class="sg-example-list">
              {{#each examples}}
                <li class="sg-example">
                  <a href="{{url}}">{{name}}</a>
                </li>
              {{/each}}
            </ul>
          </li>
        {{/each}}
      </ul>
    </div>

    <div class="sg-content">
      <div class="sg-file-list">
        {{#each files}}
          <div class="sg-file">
            <div class="sg-file-name">{{name}}</div>
            <div class="sg-file-body">
              {{#with ../displayDevices}}
                {{#each this}}
                  <div class="sg-device">
                    <div class="sg-device-name">
                      <i class="{{device.icon}}"></i> {{device.name}}
                    </div>
                    <iframe style="height: {{device.height}}px; width: {{device.width}}px;" src="{{../../path}}?device=true&amp;seed={{../../../seed}}"></iframe>
                  </div>
                {{/each}}

              {{else}}
                <iframe src="{{path}}?seed={{../seed}}"></iframe>
              {{/with}}
            </div>
          </div>
        {{/each}}
      </div>
    </div>
  </body>
</html>
